apiVersion: v1
kind: Secret
metadata:
  name: github-repo-creds
  namespace: argocd
  labels:
    argocd.argoproj.io/secret-type: repository
    app.kubernetes.io/name: argocd-repository-credentials
    app.kubernetes.io/component: security
    app.kubernetes.io/part-of: argocd
type: Opaque
stringData:
  type: git
  url: https://github.com/vsem-svoim/base-app-layer.git
  username: token
  password: ${GITHUB_TOKEN}  # Will be substituted by GitHub Actions
  name: base-app-layer-repo
---
apiVersion: v1
kind: Secret
metadata:
  name: base-app-layer-repo
  namespace: argocd
  labels:
    argocd.argoproj.io/secret-type: repository
    app.kubernetes.io/name: argocd-repository-credentials
    app.kubernetes.io/component: security
    app.kubernetes.io/part-of: argocd
    repository: base-app-layer
type: Opaque
stringData:
  type: git
  url: https://github.com/vsem-svoim/base-app-layer.git
  username: token
  password: ${GITHUB_TOKEN}  # Will be substituted by GitHub Actions
  name: base-app-layer
  project: default
---
# Template for additional GitHub repositories
apiVersion: v1
kind: Secret
metadata:
  name: github-repos-template
  namespace: argocd
  labels:
    argocd.argoproj.io/secret-type: repository
    template: "true"
type: Opaque
stringData:
  type: git
  url: https://github.com/ORGANIZATION/REPOSITORY.git
  username: token
  password: ${GITHUB_TOKEN}
  name: repository-name