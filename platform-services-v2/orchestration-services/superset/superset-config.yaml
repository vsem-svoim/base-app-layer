---
apiVersion: v1
kind: ConfigMap
metadata:
  name: superset-config
  namespace: superset
  labels:
    app.kubernetes.io/name: apache-superset
    app.kubernetes.io/component: bi-analytics
data:
  superset_config.py: |
    import os
    from flask_caching.backends.filesystemcache import FileSystemCache
    
    # Basic configuration
    SECRET_KEY = os.environ.get('SUPERSET_SECRET_KEY', 'change-this-secret-key')
    SQLALCHEMY_DATABASE_URI = 'sqlite:////tmp/superset.db'
    
    # Cache configuration
    CACHE_CONFIG = {
        'CACHE_TYPE': 'FileSystemCache',
        'CACHE_DIR': '/tmp/superset_cache'
    }
    
    # Feature flags
    FEATURE_FLAGS = {
        'ENABLE_TEMPLATE_PROCESSING': True,
    }
    
    # Security
    WTF_CSRF_ENABLED = False
    
    # Logging
    ENABLE_TIME_ROTATE = True
    LOG_FORMAT = '%(asctime)s:%(levelname)s:%(name)s:%(message)s'
    LOG_LEVEL = 'INFO'